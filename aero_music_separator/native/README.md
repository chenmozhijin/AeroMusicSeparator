# Native FFI Core

This directory builds `aero_separator_ffi` and exports the C ABI in `include/ams_ffi.h`.

## Platform notes

- Windows/Linux: integrated through Flutter desktop CMake (`windows/CMakeLists.txt`, `linux/CMakeLists.txt`).
- Android: integrated through `android/app/src/main/cpp/CMakeLists.txt`.
- macOS: packaged as `libaero_separator_ffi.dylib` into app `Frameworks/` by
  `native/tools/apple/package_macos_runtime.sh`.
- iOS: packaged as local pod `native/ios/AeroSeparatorFFI` backed by
  `AeroSeparatorFFI.xcframework` generated by
  `native/tools/apple/build_ios_ffi_xcframework.sh`.

## Required dependencies

- `BSRoformer.cpp` at `../../BSRoformer.cpp`
- `ggml` source (either sibling `../../ggml` or explicit `-DGGML_DIR=...`)
- FFmpeg development headers/libraries:
  - system packages (`AMS_USE_SYSTEM_FFMPEG=ON`), or
  - prebuilt root (`AMS_FFMPEG_ROOT=<path>`)
